create table Person
 (
     id       int primary key generated by default as identity,
     username varchar(60) not null unique,
     photo    varchar,
     password varchar     not null,
     email varchar(100),
     city     varchar(50),
     created_at timestamp not null,
     date date   not null,
     role varchar not null
 );
 create table skill(
     id int primary key generated by default as identity,
     name varchar(100) not null
 );
create table ability
(
    id        int generated by default as identity primary key,
    person_id int references person (id) on delete cascade,
    skill_id  int references skill (id) on delete cascade,
    is_it_my  bool not null,
    UNIQUE(person_id,skill_id)
);
create index ability_person_id on ability(person_id);
create index ability_skill_id on ability(skill_id);
create index person_city on person(city);
create index person_username on person(username);

create table chat_group(
    id int primary key generated by default as identity,
    name varchar(100) not null,
    created_at timestamp not null
);

create table person_chat_group(
  person_id int references person(id) on delete set null not null,
  chat_group_id int references chat_group(id) on delete cascade not null,
  primary key(person_id,chat_group_id)
);

create table message
(
    id        int primary key generated by default as identity,
    content   varchar(200),
    person_id int references person (id) on delete set null,
    chat_group_id int references chat_group(id) on delete cascade
);